import{a as Q}from"./chunk-OMY5WS2K.js";import{a as K}from"./chunk-PPCA5WCB.js";import{a as J}from"./chunk-6W6TKWEY.js";import{a as L,b as D}from"./chunk-IF7XPMP2.js";import"./chunk-GJTEV4NX.js";import{a as B,d as F,e as W,f as R,g as V,h as k,i as j,m as q,n as G,o as U,p as X,q as z,s as H}from"./chunk-2SDIOBJD.js";import{a as O,b as w}from"./chunk-EK56BJYN.js";import{Ba as i,Ca as a,Db as S,Fb as C,Ka as M,M as P,Nb as v,Pb as A,Wb as b,Xa as l,Xb as x,Yb as I,Za as s,bb as c,cb as h,db as y,ea as t,fa as g,fb as _,kb as d,lb as p,mb as N,ra as T,va as f,zb as E}from"./chunk-CQCTACGQ.js";function $(u,Y){if(u&1&&(i(0,"option",6),l(1),a()),u&2){let o=Y.$implicit;f("ngValue",o.id),t(),s(" ",o.name," ")}}var ce=(()=>{class u{constructor(o,r,e,m,n,Z){this.plannedPlantationService=o,this.landService=r,this.route=e,this.router=m,this.snackBar=n,this.translate=Z,this.lands=[],this.loading=!1,this.isEditMode=!1,this.form={landId:void 0,plannedDate:"",minTrees:0,optimalTrees:void 0,maxTrees:void 0}}ngOnInit(){this.loadLands();let o=this.route.snapshot.paramMap.get("id");o&&(this.plantationId=+o,this.isEditMode=!0,this.loadPlannedPlantation(this.plantationId))}loadLands(){this.landService.getAllLands().subscribe({next:o=>this.lands=o,error:o=>console.error("Error loading lands",o)})}loadPlannedPlantation(o){this.plannedPlantationService.getById(o).subscribe({next:r=>{this.form={landId:r.landId,plannedDate:r.plannedDate??"",minTrees:r.minTrees??0,optimalTrees:r.optimalTrees,maxTrees:r.maxTrees}},error:r=>{console.error("Error loading planned plantation",r),this.snackBar.open(this.translate.instant("PLANNED_PLANTATION.LOAD_ERROR"),this.translate.instant("COMMON.CLOSE"),{duration:3e3})}})}onSubmit(){this.loading=!0,(this.isEditMode&&this.plantationId?this.plannedPlantationService.update(this.plantationId,this.form):this.plannedPlantationService.create(this.form)).subscribe({next:()=>{this.snackBar.open(this.translate.instant(this.isEditMode?"PLANNED_PLANTATION.UPDATED":"PLANNED_PLANTATION.CREATED"),this.translate.instant("COMMON.CLOSE"),{duration:3e3}),this.router.navigate(["/admin/planned-plantations"])},error:r=>{console.error(r),this.loading=!1,this.snackBar.open(this.translate.instant("PLANNED_PLANTATION.ERROR"),this.translate.instant("COMMON.CLOSE"),{duration:3e3})}})}onCancel(){this.router.navigate(["/admin/planned-plantations"])}static{this.\u0275fac=function(r){return new(r||u)(g(Q),g(K),g(v),g(A),g(J),g(b))}}static{this.\u0275cmp=P({type:u,selectors:[["app-planned-plantation-form"]],standalone:!0,features:[_],decls:51,vars:44,consts:[[1,"p-6","max-w-3xl","mx-auto"],[1,"text-xl","font-semibold","mb-6"],[1,"flex","flex-col","gap-6",3,"ngSubmit"],[1,"flex","flex-col","gap-1"],[1,"text-sm","font-medium"],["name","landId","required","",1,"rounded-xl","border","border-gray-300","px-4","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"flex","flex-col","md:flex-row","gap-4"],[1,"flex","flex-col","gap-1","flex-1"],["type","date","name","plannedDate","required","",1,"rounded-xl","border","border-gray-300","px-4","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel","value"],["type","date","name","effectiveDate",1,"rounded-xl","border","border-gray-300","px-4","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel","value"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","number","min","0","name","minTrees","required","",1,"rounded-xl","border","border-gray-300","px-4","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],["type","number","min","0","name","optimalTrees",1,"rounded-xl","border","border-gray-300","px-4","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],["type","number","min","0","name","maxTrees",1,"rounded-xl","border","border-gray-300","px-4","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","transition",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-3","mt-6"],["type","button",1,"px-4","py-2","rounded-xl","border","border-gray-300","hover:bg-gray-100","transition",3,"click"],["type","submit",1,"flex","items-center","gap-2","bg-green-600","text-white","px-6","py-2","rounded-xl","hover:bg-green-700","disabled:opacity-50","transition",3,"disabled"]],template:function(r,e){r&1&&(i(0,"mat-card",0)(1,"h2",1),l(2),d(3,"translate"),a(),i(4,"form",2),M("ngSubmit",function(){return e.onSubmit()}),i(5,"div",3)(6,"label",4),l(7),d(8,"translate"),a(),i(9,"select",5),y("ngModelChange",function(n){return h(e.form.landId,n)||(e.form.landId=n),n}),i(10,"option",6),l(11,"\u2014"),a(),T(12,$,2,2,"option",7),a()(),i(13,"div",8)(14,"div",9)(15,"label",4),l(16),d(17,"translate"),a(),i(18,"input",10),d(19,"date"),y("ngModelChange",function(n){return h(e.form.plannedDate,n)||(e.form.plannedDate=n),n}),a()(),i(20,"div",9)(21,"label",4),l(22),d(23,"translate"),a(),i(24,"input",11),d(25,"date"),y("ngModelChange",function(n){return h(e.form.effectiveDate,n)||(e.form.effectiveDate=n),n}),a()()(),i(26,"div",12)(27,"div",3)(28,"label",4),l(29),d(30,"translate"),a(),i(31,"input",13),y("ngModelChange",function(n){return h(e.form.minTrees,n)||(e.form.minTrees=n),n}),a()(),i(32,"div",3)(33,"label",4),l(34),d(35,"translate"),a(),i(36,"input",14),y("ngModelChange",function(n){return h(e.form.optimalTrees,n)||(e.form.optimalTrees=n),n}),a()(),i(37,"div",3)(38,"label",4),l(39),d(40,"translate"),a(),i(41,"input",15),y("ngModelChange",function(n){return h(e.form.maxTrees,n)||(e.form.maxTrees=n),n}),a()()(),i(42,"div",16)(43,"button",17),M("click",function(){return e.onCancel()}),l(44),d(45,"translate"),a(),i(46,"button",18)(47,"mat-icon"),l(48,"save"),a(),l(49),d(50,"translate"),a()()()()),r&2&&(t(2),s(" ",p(3,20,"PLANNED_PLANTATION.NEW")," "),t(5),s(" ",p(8,22,"PLANNED_PLANTATION.LAND")," "),t(2),c("ngModel",e.form.landId),t(),f("ngValue",null),t(2),f("ngForOf",e.lands),t(4),s(" ",p(17,24,"PLANNED_PLANTATION.PLANNED_DATE")," "),t(2),c("ngModel",e.form.plannedDate),f("value",N(19,26,e.form.plannedDate,"yyyy-MM-dd")),t(4),s(" ",p(23,29,"PLANNED_PLANTATION.EFFECTIVE_DATE")," "),t(2),c("ngModel",e.form.effectiveDate),f("value",N(25,31,e.form.effectiveDate,"yyyy-MM-dd")),t(5),s(" ",p(30,34,"PLANNED_PLANTATION.MIN_TREES")," "),t(2),c("ngModel",e.form.minTrees),t(3),s(" ",p(35,36,"PLANNED_PLANTATION.OPTIMAL_TREES")," "),t(2),c("ngModel",e.form.optimalTrees),t(3),s(" ",p(40,38,"PLANNED_PLANTATION.MAX_TREES")," "),t(2),c("ngModel",e.form.maxTrees),t(3),s(" ",p(45,40,"COMMON.CANCEL")," "),t(2),f("disabled",e.loading),t(3),s(" ",p(50,42,"COMMON.SAVE")," "))},dependencies:[C,E,S,H,k,G,U,B,j,q,F,W,z,X,V,R,w,O,D,L,I,x],encapsulation:2})}}return u})();export{ce as PlannedPlantationFormComponent};
