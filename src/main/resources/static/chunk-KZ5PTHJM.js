import{a as M}from"./chunk-OP2V34EW.js";import{a as H,d as Z,e as z,f as J,g as K}from"./chunk-FZQO5XDR.js";import{a as B}from"./chunk-PQEWOXHD.js";import{b as O}from"./chunk-ODURNTPO.js";import{a as V,b as x,d as D,e as P,h as j,i as k,k as L,l as G,r as q,t as U}from"./chunk-W5EN7SUI.js";import{a as w,b as R}from"./chunk-MGSRZDJZ.js";import{Ba as r,Ca as t,Da as l,Db as C,Ha as y,Ka as b,Lb as _,M as I,Ma as f,Nb as g,S as h,T as E,Vb as S,Wb as F,Xa as n,Ya as d,Za as v,ea as i,eb as T,fa as u,ib as a,jb as o,ra as N,va as c,yb as A}from"./chunk-QVELB6IZ.js";function X(p,Y){if(p&1){let e=y();r(0,"mat-card",1)(1,"div",2)(2,"h2",3),n(3),a(4,"translate"),t(),r(5,"form",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),n(9),a(10,"translate"),t(),l(11,"input",7),t()(),r(12,"div",5)(13,"mat-form-field",6)(14,"mat-label"),n(15),a(16,"translate"),t(),l(17,"input",8),t()(),r(18,"div",5)(19,"mat-form-field",6)(20,"mat-label"),n(21),a(22,"translate"),t(),l(23,"input",9),t()(),r(24,"div",5)(25,"mat-form-field",6)(26,"mat-label"),n(27),a(28,"translate"),t(),l(29,"input",10),t()(),r(30,"div",5)(31,"mat-form-field",6)(32,"mat-label"),n(33),a(34,"translate"),t(),l(35,"input",11),t()(),r(36,"div",5)(37,"mat-form-field",6)(38,"mat-label"),n(39),a(40,"translate"),t(),l(41,"input",12),t()(),r(42,"div",5)(43,"mat-form-field",6)(44,"mat-label"),n(45),a(46,"translate"),t(),l(47,"input",13),t()(),r(48,"div",14)(49,"button",15),b("click",function(){h(e);let s=f();return E(s.cancel())}),n(50),a(51,"translate"),t(),r(52,"button",16),b("click",function(){h(e);let s=f();return E(s.save())}),n(53),a(54,"translate"),t()()()()()}if(p&2){let e=f();i(3),v(" ",e.tree.customName||(e.tree.treeType==null?null:e.tree.treeType.name)||o(4,14,"TREE.ARBOL_SIN_TIPO")," "),i(2),c("formGroup",e.treeForm),i(4),d(o(10,16,"TREE.NOMBRE_PERSONALIZADO")),i(6),d(o(16,18,"TREE.TIPO")),i(6),d(o(22,20,"TREE.SPICE")),i(6),d(o(28,22,"TREE.CO2_ABSORBIDO")),i(2),c("readonly",!e.isAdmin),i(4),d(o(34,24,"TREE.PLANTADO_EL")),i(2),c("readonly",!e.isAdmin),i(4),d(o(40,26,"TREE.TERRENO")),i(6),d(o(46,28,"TREE.PROPIETARIO")),i(5),v(" ",o(51,30,"COMMON.CANCEL")," "),i(2),c("disabled",!e.treeForm.valid),i(),v(" ",o(54,32,"COMMON.SAVE_CHANGES")," ")}}var xe=(()=>{class p{constructor(e,m,s,Q,W){this.fb=e,this.route=m,this.router=s,this.treeService=Q,this.authService=W,this.isAdmin=!1}ngOnInit(){this.isAdmin=this.authService.currentUserRole==="ADMIN";let e=this.route.snapshot.paramMap.get("id");e&&this.treeService.getTreeById(+e).subscribe(m=>{this.tree=m,this.initForm()})}initForm(){this.treeForm=this.fb.group({customName:[this.tree.customName||""],treeTypeName:[{value:this.tree.treeType?.name,disabled:!0}],species:[{value:this.tree.species,disabled:!0}],co2Absorption:[{value:this.tree.co2Absorption,disabled:!this.isAdmin},[x.required,x.min(0)]],plantedAt:[{value:this.tree.plantedAt,disabled:!this.isAdmin},x.required],landName:[{value:this.tree.land?.name,disabled:!0}],ownerName:[{value:this.tree.ownerUserName,disabled:!0}]})}save(){if(!this.treeForm.valid)return;let e={co2Absorption:this.treeForm.get("co2Absorption")?.value,plantedAt:this.treeForm.get("plantedAt")?.value,customName:this.treeForm.get("customName")?.value};this.treeService.updateTree(this.tree.id,e).subscribe(()=>{this.router.navigate(["/tree",this.tree.id])})}cancel(){this.router.navigate(["/tree",this.tree.id])}static{this.\u0275fac=function(m){return new(m||p)(u(q),u(_),u(g),u(B),u(M))}}static{this.\u0275cmp=I({type:p,selectors:[["app-tree-form"]],standalone:!0,features:[T],decls:1,vars:1,consts:[["class","rounded-2xl shadow-md p-6 md:p-8 w-full max-w-full mx-auto",4,"ngIf"],[1,"rounded-2xl","shadow-md","p-6","md:p-8","w-full","max-w-full","mx-auto"],[1,"flex","flex-col","text-left","w-full"],[1,"text-xl","md:text-2xl","font-semibold","mb-2"],[1,"w-full",3,"formGroup"],[1,"mb-4"],[1,"w-full"],["matInput","","formControlName","customName"],["matInput","","formControlName","treeTypeName","readonly",""],["matInput","","formControlName","species","readonly",""],["matInput","","type","number","formControlName","co2Absorption",3,"readonly"],["matInput","","type","date","formControlName","plantedAt",3,"readonly"],["matInput","","formControlName","landName","readonly",""],["matInput","","formControlName","ownerName","readonly",""],[1,"flex","gap-4","mt-4","w-full","justify-center","md:justify-start"],["type","button",1,"flex-1","md:flex-auto","bg-gray-300","text-gray-800","py-3","px-6","rounded-xl","hover:bg-gray-400","transition",3,"click"],["type","button",1,"flex-1","md:flex-auto","bg-green-600","text-white","py-3","px-6","rounded-xl","hover:bg-green-700","transition",3,"click","disabled"]],template:function(m,s){m&1&&N(0,X,55,34,"mat-card",0),m&2&&c("ngIf",s.tree)},dependencies:[C,A,U,j,V,k,D,P,L,G,z,Z,H,K,J,O,R,w,F,S]})}}return p})();export{xe as TreeFormComponent};
