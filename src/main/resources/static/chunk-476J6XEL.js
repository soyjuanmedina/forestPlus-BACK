import{a as S}from"./chunk-OP2V34EW.js";import{a as C}from"./chunk-NFADQOFW.js";import{Eb as h,H as s,K as o,Lc as p,Mc as m,Oc as U,Qc as f,a as u,b as d,i as c,n as l}from"./chunk-QVELB6IZ.js";var a=function(t){return t.ADMIN="ADMIN",t.USER="USER",t.COMPANY_ADMIN="COMPANY_ADMIN",t.COMPANY_USER="COMPANY_USER",t}(a||{}),I=[{value:a.ADMIN,label:"Administrador"},{value:a.USER,label:"Usuario"},{value:a.COMPANY_ADMIN,label:"Administrador de Compa\xF1\xEDa"},{value:a.COMPANY_USER,label:"Usuario de Compa\xF1\xEDa"}];var B=(()=>{class t{constructor(e,r,n){this.userController=e,this.http=r,this.authService=n,this.user$=this.authService.user$}getUser(){return this.authService.user$}updateCurrentUser(e){this.authService.updateCurrentUser(e)}getCurrentUser(){return this.authService.getUser()}getCurrentUser$(){return this.authService.user$}getUsers(e=0,r=10,n="id,asc",i,g){return this.userController.getUsers(i,g,e,r,n)}getUserById(e){return this.userController.getUserById(e)}updateUser(e,r){return this.userController.updateUser(e,r).pipe(l(n=>(this.getCurrentUser()?.id===n.id&&this.authService.updateCurrentUser(n),n)))}updateUserByAdmin(e,r){return this.userController.updateUserByAdmin(e,r)}registerUserByAdmin(e){return this.userController.registerUserByAdmin(e)}deleteUser(e){return this.userController.deleteUser(e)}isAdminOrCompanyAdmin(){let e=this.getCurrentUser();return!!e&&(e.role===a.ADMIN||e.role===a.COMPANY_ADMIN)}updateUserPicture(e,r){let n=new FormData;return n.append("file",r),this.http.put(`${C.apiBaseUrl}/api/users/${e}/picture`,n).pipe(l(i=>(this.getCurrentUser()?.id===i.id&&this.authService.updateCurrentUser(i),i)))}static{this.\u0275fac=function(r){return new(r||t)(o(f),o(h),o(S))}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var D=(()=>{class t{constructor(e,r,n){this.landController=e,this.coordinateController=r,this.treeController=n,this.landSubject=new c(null);let i=localStorage.getItem("forestPlus_land");i&&this.landSubject.next(JSON.parse(i))}getLand(){return this.landSubject.asObservable()}getCurrentLand(){return this.landSubject.value}updateCurrentLand(e){this.landSubject.next(e),localStorage.setItem("forestPlus_land",JSON.stringify(e))}clearLand(){this.landSubject.next(null),localStorage.removeItem("forestPlus_land")}getAllLands(){return this.landController.getAllLands()}getLandById(e){return this.landController.getLandById(e)}createLand(e){return this.landController.createLand(e)}updateLand(e,r){return this.landController.updateLand(e,r)}deleteLand(e){return this.landController.deleteLand(e)}getCoordinatesByLand(e){return this.coordinateController.getCoordinatesByLand(e)}createCoordinate(e,r){return this.coordinateController.createCoordinate(d(u({},r),{landId:e}))}deleteCoordinate(e){return this.coordinateController.deleteCoordinate(e)}getTreesByLand(e){return this.treeController.getTreesByLand(e)}static{this.\u0275fac=function(r){return new(r||t)(o(m),o(p),o(U))}}static{this.\u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{a,I as b,B as c,D as d};
