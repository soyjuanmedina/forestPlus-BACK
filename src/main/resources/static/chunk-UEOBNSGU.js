import{C as p,dc as u,g as i,gc as c,k as o,mb as s,z as m}from"./chunk-4KXJWRUC.js";var f=(()=>{class a{constructor(t,e){this.companyController=t,this.http=e,this.companySubject=new i(null);let r=localStorage.getItem("forestPlus_company");r&&this.companySubject.next(JSON.parse(r))}getCompany(){return this.companySubject.asObservable()}getCurrentCompany(){return this.companySubject.value}updateCurrentCompany(t){this.companySubject.next(t),localStorage.setItem("forestPlus_company",JSON.stringify(t))}clearCompany(){this.companySubject.next(null),localStorage.removeItem("forestPlus_company")}getAllCompanies(){return this.companyController.getAllCompanies()}getCompanies(t,e,r){return this.companyController.getAllCompanies()}getCompanyById(t){return this.companyController.getCompanyById(t).pipe(o(e=>(this.updateCurrentCompany(e),e)))}createCompany(t){return this.companyController.createCompany(t).pipe(o(e=>(this.updateCurrentCompany(e),e)))}updateCompany(t,e){let r={name:e.name,address:e.address};return this.companyController.updateCompany(t,r).pipe(o(n=>(this.companySubject.value?.id===n.id&&this.updateCurrentCompany(n),n)))}deleteCompany(t){return this.companyController.deleteCompany(t).pipe(o(e=>(this.companySubject.value?.id===t&&this.clearCompany(),e)))}updateCompanyPicture(t,e){let r=new FormData;return r.append("file",e),this.http.put(`${u.apiBaseUrl}/api/companies/${t}/picture`,r).pipe(o(n=>(this.companySubject.value?.id===n.id&&this.updateCurrentCompany(n),n)))}static{this.\u0275fac=function(e){return new(e||a)(p(c),p(s))}}static{this.\u0275prov=m({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();export{f as a};
