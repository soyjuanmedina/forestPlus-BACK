import{a as l}from"./chunk-I6AMTEEF.js";import{E as u,Gc as a,H as n,i as o,n as p,zb as s}from"./chunk-46BDENMO.js";var d=(()=>{class i{constructor(e,t){this.treeTypeController=e,this.http=t,this.treeTypeSubject=new o(null);let r=localStorage.getItem("forestPlus_treeType");r&&this.treeTypeSubject.next(JSON.parse(r))}getTreeType(){return this.treeTypeSubject.asObservable()}getCurrentTreeType(){return this.treeTypeSubject.value}updateCurrentTreeType(e){this.treeTypeSubject.next(e),localStorage.setItem("forestPlus_treeType",JSON.stringify(e))}clearTreeType(){this.treeTypeSubject.next(null),localStorage.removeItem("forestPlus_treeType")}getAllTreeTypes(){return this.treeTypeController.getAllTreeTypes()}getTreeTypeById(e){return this.treeTypeController.getTreeTypeById(e).pipe(p(t=>(this.updateCurrentTreeType(t),t)))}createTreeType(e){return this.treeTypeController.createTreeType(e).pipe(p(t=>(this.updateCurrentTreeType(t),t)))}updateTreeType(e,t){return this.treeTypeController.updateTreeType(e,t).pipe(p(r=>(this.treeTypeSubject.value?.id===r.id&&this.updateCurrentTreeType(r),r)))}deleteTreeType(e){return this.treeTypeController.deleteTreeType(e).pipe(p(t=>(this.treeTypeSubject.value?.id===e&&this.clearTreeType(),t)))}updateTreeTypePicture(e,t){let r=new FormData;return r.append("file",t),this.http.put(`${l.apiBaseUrl}/api/tree-types/${e}/picture`,r).pipe(p(T=>(this.treeTypeSubject.value?.id===T.id&&this.updateCurrentTreeType(T),T)))}static{this.\u0275fac=function(t){return new(t||i)(n(a),n(s))}}static{this.\u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{d as a};
