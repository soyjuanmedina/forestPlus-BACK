import{e as Q}from"./chunk-EB46IJZC.js";import{a as H,b as J,h as K}from"./chunk-GYPK2KXW.js";import{a as O}from"./chunk-RQSOZTF4.js";import{b as R}from"./chunk-AAZTCM4C.js";import{a as G,b as _,d as B,e as D,h as L,j,k as w,l as V,m as k,n as P,o as q,r as $,s as U,t as z}from"./chunk-K7O3QZSU.js";import{Cb as N,Db as F,E as I,Ga as s,Ha as S,Ia as u,Ja as y,Pa as x,Ta as d,Ua as p,V as i,W as m,da as f,fb as A,ga as l,gb as E,jb as C,lb as M,ma as a,na as r,oa as b,va as v,xa as h}from"./chunk-4KXJWRUC.js";function W(t,c){if(t&1&&(a(0,"option",12),s(1),r()),t&2){let e=c.$implicit;l("value",e.id),i(),S(e.name)}}function X(t,c){if(t&1&&(a(0,"li",14),b(1,"input",15),s(2),d(3,"date"),r()),t&2){let e=c.$implicit;i(),l("value",e.id),i(),y(" ",e.treeTypeName," - Plantado: ",p(3,3,e.plantedAt)," ")}}function Y(t,c){if(t&1&&(a(0,"div")(1,"label",4),s(2),d(3,"translate"),r(),a(4,"ul"),f(5,X,4,5,"li",13),r()()),t&2){let e=h();i(2),S(p(3,2,"ASSIGN_TREES.TREES")),i(3),l("ngForOf",e.unassignedTrees)}}function Z(t,c){t&1&&(a(0,"p",16),s(1),d(2,"translate"),r()),t&2&&(i(),u(" ",p(2,1,"ASSIGN_TREES.NO_TREES")," "))}var ce=(()=>{class t{constructor(e,o,n,g,T){this.fb=e,this.landService=o,this.treeService=n,this.dialogRef=g,this.data=T,this.lands=[],this.unassignedTrees=[],this.form=this.fb.group({landId:[null,_.required],treeId:[null,_.required]})}ngOnInit(){this.landService.getAllLands().subscribe(e=>this.lands=e)}onLandChange(e){let o=Number(e.target.value);this.treeService.getUnassignedTreesByLand(o).subscribe(n=>this.unassignedTrees=n)}submit(){if(!this.form.valid)return;let e=this.form.value.treeId,o=this.data.userId?{userId:this.data.userId,treeId:e}:{companyId:this.data.companyId,treeId:e};this.dialogRef.close(o)}static{this.\u0275fac=function(o){return new(o||t)(m($),m(Q),m(O),m(H),m(J))}}static{this.\u0275cmp=I({type:t,selectors:[["app-assign-trees-modal"]],standalone:!0,features:[x],decls:20,vars:17,consts:[[1,"p-6","w-full","max-w-md","bg-white","rounded-2xl","shadow-lg"],[1,"text-2xl","font-bold","text-green-700","mb-6","text-center"],[3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"block","text-gray-700","mb-1"],["formControlName","landId",1,"w-full","rounded-xl","border","border-gray-300","p-2",3,"change"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","text-gray-500 italic",4,"ngIf"],[1,"flex","justify-end","gap-4","mt-8"],["type","button",1,"px-4","py-2","rounded-lg","bg-gray-200","text-gray-700","hover:bg-gray-300","transition",3,"click"],["type","submit",1,"px-4","py-2","rounded-lg","bg-green-600","text-white","hover:bg-green-700","disabled:opacity-50","transition",3,"disabled"],[3,"value"],["class","flex items-center gap-2 py-1",4,"ngFor","ngForOf"],[1,"flex","items-center","gap-2","py-1"],["type","radio","formControlName","treeId",3,"value"],[1,"text-gray-500","italic"]],template:function(o,n){o&1&&(a(0,"div",0)(1,"h2",1),s(2),d(3,"translate"),r(),a(4,"form",2),v("ngSubmit",function(){return n.submit()}),a(5,"div",3)(6,"label",4),s(7),d(8,"translate"),r(),a(9,"select",5),v("change",function(T){return n.onLandChange(T)}),f(10,W,2,2,"option",6),r()(),f(11,Y,6,4,"div",7)(12,Z,3,3,"p",8),a(13,"div",9)(14,"button",10),v("click",function(){return n.dialogRef.close()}),s(15),d(16,"translate"),r(),a(17,"button",11),s(18),d(19,"translate"),r()()()()),o&2&&(i(2),u(" ",p(3,9,"ASSIGN_TREES.TITLE")," "),i(2),l("formGroup",n.form),i(3),S(p(8,11,"ASSIGN_TREES.LAND")),i(3),l("ngForOf",n.lands),i(),l("ngIf",n.unassignedTrees==null?null:n.unassignedTrees.length),i(),l("ngIf",!(n.unassignedTrees!=null&&n.unassignedTrees.length)),i(3),u(" ",p(16,13,"COMMON.CANCEL")," "),i(2),l("disabled",n.form.invalid),i(),u(" ",p(19,15,"ASSIGN_TREES.ASSIGN")," "))},dependencies:[M,A,E,C,K,R,U,L,P,q,G,k,j,B,D,z,w,V,F,N],encapsulation:2})}}return t})();export{ce as a};
