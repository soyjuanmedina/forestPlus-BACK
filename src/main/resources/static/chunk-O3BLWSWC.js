import{a as Pe,b as $,c as Ve,d as De,e as Le}from"./chunk-A5APZH7L.js";import{a as ke,b as Ue}from"./chunk-NYRRFHRH.js";import{d as Be}from"./chunk-X4JOGK6C.js";import{c as de}from"./chunk-476J6XEL.js";import{b as Ne}from"./chunk-GATO4Y6S.js";import{c as Re}from"./chunk-IC3WLJWW.js";import{a as pe}from"./chunk-OP2V34EW.js";import{e as Fe,g as Ye}from"./chunk-FZQO5XDR.js";import{a as ue}from"./chunk-PQEWOXHD.js";import{c as ce}from"./chunk-NFADQOFW.js";import{b as _e}from"./chunk-ODURNTPO.js";import{a as Ce,b as ge,d as xe,e as fe,g as ve,h as ye,i as he,k as Ee,l as be,m as Me,n as Se,o as Oe,q as Te,r as Ie,s as we,t as Ae}from"./chunk-W5EN7SUI.js";import{b as me}from"./chunk-MGSRZDJZ.js";import{Ab as te,Ba as a,C as T,Ca as o,Cb as ie,Da as S,Db as ne,Ea as P,Fa as V,H as z,Ha as E,Jc as le,K as H,Ka as y,Lb as oe,M as J,Ma as c,Nb as re,Pa as D,S as g,T as x,Vb as ae,Wa as L,Wb as se,Xa as l,Ya as _,Za as u,ab as I,bb as w,cb as A,da as K,ea as n,eb as Q,fa as M,gb as j,h as G,ib as p,jb as d,kb as Y,l as R,lb as k,p as q,ra as v,u as B,va as m,wb as X,xb as Z,yb as ee}from"./chunk-QVELB6IZ.js";var je=(()=>{class r{constructor(e){this.co2Api=e}getAll(e){return this.co2Api.getCompanyCO2YearlyList(e)}save(e,t){return this.co2Api.createOrUpdateCompanyCO2Yearly(e,t)}delete(e,t){return this.co2Api.deleteCompanyCO2Yearly(e,t)}static{this.\u0275fac=function(t){return new(t||r)(H(le))}}static{this.\u0275prov=z({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var $e=r=>({percentage:r});function He(r,C){if(r&1){let e=E();a(0,"button",27),y("click",function(){g(e);let i=c(2);return x(i.openAssignTreesModal(i.company.id))}),l(1),p(2,"translate"),o()}r&2&&(n(),u(" ",d(2,1,"ASSIGN_TREES.ASSIGN_PLANTED_TREES")," "))}function Je(r,C){if(r&1){let e=E();a(0,"button",33),y("click",function(){g(e);let i=c().$implicit,s=c(3);return x(s.openUnassignTreesModal(i))}),l(1),p(2,"translate"),o()}r&2&&(n(),u(" ",d(2,1,"ASSIGN_TREES.UNASSIGN")," "))}function Ke(r,C){if(r&1&&(a(0,"li",29)(1,"div")(2,"span",30),l(3),o(),a(4,"span",31),l(5),o()(),v(6,Je,3,3,"button",32),o()),r&2){let e=C.$implicit,t=c(3);n(3),_(e.treeTypeName),n(2),u("",e.quantity||1," \xE1rboles"),n(),m("ngIf",t.isAdmin)}}function Qe(r,C){if(r&1&&(a(0,"ul"),v(1,Ke,7,3,"li",28),o()),r&2){let e=c(2);n(),m("ngForOf",e.companyTrees)}}function Xe(r,C){r&1&&(a(0,"p",34),l(1),p(2,"translate"),o()),r&2&&(n(),_(d(2,1,"COMPANY.NO_TREES_PLANTED")))}function Ze(r,C){if(r&1){let e=E();a(0,"div",52)(1,"div")(2,"label",53),l(3),p(4,"translate"),o(),a(5,"input",54),A("ngModelChange",function(i){g(e);let s=c(5);return w(s.co2Years[0].editEmissions,i)||(s.co2Years[0].editEmissions=i),x(i)}),o()(),a(6,"div")(7,"label",53),l(8),p(9,"translate"),o(),a(10,"input",54),A("ngModelChange",function(i){g(e);let s=c(5);return w(s.co2Years[0].editCompensations,i)||(s.co2Years[0].editCompensations=i),x(i)}),o()(),a(11,"button",55),y("click",function(){g(e);let i=c(5);return x(i.saveCO2(i.co2Years[0]))}),l(12),p(13,"translate"),o()()}if(r&2){let e=c(5);n(3),_(d(4,5,"COMPANY_FORM.ISSUED_LABEL")),n(2),I("ngModel",e.co2Years[0].editEmissions),n(3),_(d(9,7,"COMPANY_FORM.COMPENSATED_LABEL")),n(2),I("ngModel",e.co2Years[0].editCompensations),n(2),u(" ",d(13,9,"COMPANY_FORM.SUBMIT_EDIT")," ")}}function et(r,C){if(r&1){let e=E();P(0),a(1,"button",56),y("click",function(){g(e);let i=c(5);return x(i.toggleEditCO2(i.co2Years[0]))}),l(2),p(3,"translate"),o(),V()}r&2&&(n(2),u(" ",d(3,1,"COMPANY_FORM.EDIT_BUTTON")," "))}function tt(r,C){if(r&1){let e=E();a(0,"button",57),y("click",function(){g(e);let i=c(5);return x(i.toggleEditCO2(i.co2Years[0]))}),l(1),p(2,"translate"),o(),a(3,"button",58),y("click",function(){g(e);let i=c(5);return x(i.deleteCO2(i.co2Years[0]))}),l(4),p(5,"translate"),o()}r&2&&(n(),u(" ",d(2,2,"COMPANY_FORM.CANCEL_EDIT_BUTTON")," "),n(3),u(" ",d(5,4,"COMPANY_FORM.DELETE_BUTTON")," "))}function it(r,C){if(r&1){let e=E();a(0,"div",52)(1,"div")(2,"label",53),l(3),p(4,"translate"),o(),a(5,"input",54),A("ngModelChange",function(i){g(e);let s=c().$implicit;return w(s.editEmissions,i)||(s.editEmissions=i),x(i)}),o()(),a(6,"div")(7,"label",53),l(8),p(9,"translate"),o(),a(10,"input",54),A("ngModelChange",function(i){g(e);let s=c().$implicit;return w(s.editCompensations,i)||(s.editCompensations=i),x(i)}),o()(),a(11,"button",55),y("click",function(){g(e);let i=c().$implicit,s=c(5);return x(s.saveCO2(i))}),l(12),p(13,"translate"),o()()}if(r&2){let e=c().$implicit;n(3),_(d(4,5,"COMPANY_FORM.ISSUED_LABEL")),n(2),I("ngModel",e.editEmissions),n(3),_(d(9,7,"COMPANY_FORM.COMPENSATED_LABEL")),n(2),I("ngModel",e.editCompensations),n(2),u(" ",d(13,9,"COMPANY_FORM.SUBMIT_EDIT")," ")}}function nt(r,C){if(r&1){let e=E();P(0),a(1,"button",56),y("click",function(){g(e);let i=c().$implicit,s=c(5);return x(s.toggleEditCO2(i))}),l(2),p(3,"translate"),o(),V()}r&2&&(n(2),u(" ",d(3,1,"COMPANY_FORM.EDIT_BUTTON")," "))}function ot(r,C){if(r&1){let e=E();a(0,"button",57),y("click",function(){g(e);let i=c().$implicit,s=c(5);return x(s.toggleEditCO2(i))}),l(1),p(2,"translate"),o(),a(3,"button",58),y("click",function(){g(e);let i=c().$implicit,s=c(5);return x(s.deleteCO2(i))}),l(4),p(5,"translate"),o()}r&2&&(n(),u(" ",d(2,2,"COMPANY_FORM.CANCEL_EDIT_BUTTON")," "),n(3),u(" ",d(5,4,"COMPANY_FORM.DELETE_BUTTON")," "))}function rt(r,C){if(r&1&&(a(0,"div",59)(1,"div",60),l(2),o(),v(3,it,14,11,"div",41),a(4,"div",42)(5,"div",43)(6,"div",44),l(7),p(8,"translate"),o(),S(9,"canvas",61),o(),a(10,"div",43)(11,"div",44),l(12),p(13,"translate"),o(),S(14,"canvas",61),o(),a(15,"div",43)(16,"div",62),l(17),p(18,"number"),o(),a(19,"div",63),l(20),p(21,"translate"),o(),a(22,"div",64),l(23),p(24,"translate"),o()()(),a(25,"div",49)(26,"div",50),v(27,nt,4,3,"ng-container",24)(28,ot,6,6,"ng-template",null,1,k),o()()()),r&2){let e=C.$implicit,t=L(29),i=c(5);n(2),_(e.year),n(),m("ngIf",e.editMode),n(4),_(d(8,12,"COMPANY_FORM.ISSUED_LABEL")),n(2),m("id",e.emitidoRef),n(3),_(d(13,14,"COMPANY_FORM.COMPENSATED_LABEL")),n(2),m("id",e.compensadoRef),n(2),m("ngClass",i.getNetColorClass(e.totalEmissions,e.totalCompensations)),n(),u(" ",Y(18,16,e.totalEmissions-e.totalCompensations,"1.0-0")," "),n(3),_(d(21,19,"COMPANY_FORM.TONS_CO2")),n(3),u(" ",Y(24,21,"COMPANY_FORM.PREVIOUS_COMPENSATED_PERCENTAGE",j(24,$e,i.getCompensatedPercentage(e.totalEmissions,e.totalCompensations)))," "),n(4),m("ngIf",!e.editMode)("ngIfElse",t)}}function at(r,C){if(r&1&&(a(0,"div")(1,"div",21)(2,"p",22),l(3),p(4,"translate"),o()(),a(5,"div",40)(6,"p",22),l(7),p(8,"translate"),o(),a(9,"p",22),l(10),o(),v(11,Ze,14,11,"div",41),a(12,"div",42)(13,"div",43)(14,"div",44),l(15),p(16,"translate"),o(),S(17,"canvas",45),o(),a(18,"div",43)(19,"div",44),l(20),p(21,"translate"),o(),S(22,"canvas",45),o(),a(23,"div",43)(24,"div",44),l(25),p(26,"translate"),o(),a(27,"div",46),l(28),p(29,"number"),o(),a(30,"div",47),l(31),p(32,"translate"),o(),a(33,"div",48),l(34),p(35,"translate"),o()()(),a(36,"div",49)(37,"div",50),v(38,et,4,3,"ng-container",24)(39,tt,6,6,"ng-template",null,1,k),o()()(),a(41,"div",21)(42,"p",22),l(43),p(44,"translate"),o()(),v(45,rt,30,26,"div",51),o()),r&2){let e=L(40),t=c(4);n(3),_(d(4,17,"COMPANY.CO2_SECTION_TITLE")),n(4),_(d(8,19,"COMPANY.LAST_YEAR")),n(3),_(t.co2Years[0].year),n(),m("ngIf",t.co2Years[0].editMode),n(4),_(d(16,21,"COMPANY_FORM.ISSUED_LABEL")),n(2),m("id",t.co2Years[0].emitidoRef),n(3),_(d(21,23,"COMPANY_FORM.COMPENSATED_LABEL")),n(2),m("id",t.co2Years[0].compensadoRef),n(3),_(d(26,25,"COMPANY_FORM.NET_VALUE")),n(2),m("ngClass",t.getNetColorClass(t.co2Years[0].totalEmissions,t.co2Years[0].totalCompensations)),n(),u(" ",Y(29,27,t.co2Years[0].totalEmissions-t.co2Years[0].totalCompensations,"1.0-0")," "),n(3),_(d(32,30,"COMPANY_FORM.TONS_CO2")),n(3),u(" ",Y(35,32,"COMPANY_FORM.COMPENSATED_PERCENTAGE",j(37,$e,t.getCompensatedPercentage(t.co2Years[0].totalEmissions,t.co2Years[0].totalCompensations)))," "),n(4),m("ngIf",!t.co2Years[0].editMode)("ngIfElse",e),n(5),u("",d(44,35,"COMPANY.PREVIOUS_YEARS_TITLE")," "),n(2),m("ngForOf",t.co2Years.slice(1))}}function st(r,C){if(r&1&&(a(0,"option",65),l(1),o()),r&2){let e=C.$implicit;m("value",e),n(),_(e)}}function lt(r,C){if(r&1){let e=E();P(0),v(1,at,46,39,"div",26),a(2,"div",35)(3,"label",36),l(4),p(5,"translate"),o(),a(6,"select",37),A("ngModelChange",function(i){g(e);let s=c(3);return w(s.selectedYear,i)||(s.selectedYear=i),x(i)}),v(7,st,2,2,"option",38),o(),S(8,"br"),a(9,"button",39),y("click",function(){g(e);let i=c(3);return x(i.addNewYear(i.selectedYear))}),l(10),p(11,"translate"),o()(),V()}if(r&2){let e=c(3);n(),m("ngIf",e.co2Years==null?null:e.co2Years.length),n(3),_(d(5,5,"COMPANY_FORM.ADD_YEAR_LABEL")),n(2),I("ngModel",e.selectedYear),n(),m("ngForOf",e.availableYears),n(3),u(" ",d(11,7,"COMPANY_FORM.ADD_YEAR_BUTTON")," ")}}function pt(r,C){if(r&1&&(a(0,"div"),v(1,lt,12,9,"ng-container",26),o()),r&2){let e=C.ngIf;n(),m("ngIf",e.role==="ADMIN")}}function dt(r,C){if(r&1){let e=E();a(0,"div",3)(1,"form",4),y("ngSubmit",function(){g(e);let i=c();return x(i.onSubmitCompany())}),a(2,"h1",5),l(3),p(4,"translate"),p(5,"translate"),o(),a(6,"div",6),S(7,"img",7),p(8,"translate"),a(9,"label",8)(10,"span",9),l(11,"photo_camera"),o(),a(12,"span"),l(13),p(14,"translate"),o(),a(15,"input",10),y("change",function(i){g(e);let s=c();return x(s.onCompanyFileSelected(i))}),o()()(),a(16,"div",11)(17,"div",12)(18,"label",13),l(19),p(20,"translate"),o(),S(21,"input",14),p(22,"translate"),o(),a(23,"div",12)(24,"label",15),l(25),p(26,"translate"),o(),S(27,"input",16),p(28,"translate"),o()(),a(29,"div",17)(30,"button",18),y("click",function(){g(e);let i=c();return x(i.cancel())}),l(31),p(32,"translate"),o(),a(33,"button",19),l(34),p(35,"translate"),p(36,"translate"),o()()(),a(37,"div",20)(38,"div",21)(39,"p",22),l(40),p(41,"translate"),o(),v(42,He,3,3,"button",23),o(),v(43,Qe,2,1,"ul",24)(44,Xe,3,3,"ng-template",null,0,k),o(),S(46,"hr",25),v(47,pt,2,1,"div",26),p(48,"async"),o()}if(r&2){let e=L(45),t=c();n(),m("formGroup",t.companyForm),n(2),u(" ",t.company.id?d(4,16,"COMPANY_FORM.TITLE_EDIT"):d(5,18,"COMPANY_FORM.TITLE_NEW")," "),n(4),D("alt",d(8,20,"COMPANY_FORM.TITLE_NEW")),m("src",t.previewImage||t.company.picture||"assets/logo-white.png",K),n(6),_(d(14,22,"COMPANY_FORM.SELECT_IMAGE")),n(6),_(d(20,24,"COMPANY_FORM.NAME_LABEL")),n(2),D("placeholder",d(22,26,"COMPANY_FORM.NAME_PLACEHOLDER")),n(4),_(d(26,28,"COMPANY_FORM.ADDRESS_LABEL")),n(2),D("placeholder",d(28,30,"COMPANY_FORM.ADDRESS_PLACEHOLDER")),n(4),u(" ",d(32,32,"COMPANY_FORM.CANCEL_BUTTON")," "),n(3),u(" ",t.company.id?d(35,34,"COMPANY_FORM.SUBMIT_EDIT"):d(36,36,"COMPANY_FORM.SUBMIT_NEW")," "),n(6),_(d(41,38,"COMPANY.TREES_PLANTED_TITLE")),n(2),m("ngIf",t.isAdmin),n(),m("ngIf",t.companyTrees==null?null:t.companyTrees.length)("ngIfElse",e),n(4),m("ngIf",d(48,40,t.currentUser$))}}var Rt=(()=>{class r{constructor(e,t,i,s,f,b,F,O,U){this.fb=e,this.companyService=t,this.companyCo2Service=i,this.route=s,this.router=f,this.userService=b,this.treeService=F,this.dialog=O,this.authService=U,this.company={id:void 0,name:"",address:"",co2:[]},this.co2Years=[],this.chartsMap={},this.availableYears=[],this.currentUser$=this.userService.getCurrentUser$(),this.isAdmin=!1,this.companyTrees=[],this.destroy$=new G,$.register(Pe,Ve,Le,De)}ngOnInit(){this.initForm(),this.checkRole();let e=Number(this.route.snapshot.paramMap.get("id"));e&&(this.loadCompany(e),this.loadCompanyTrees(e)),this.userService.getUser().pipe(T(this.destroy$)).subscribe(t=>this.user=t)}ngOnDestroy(){Object.values(this.chartsMap).forEach(e=>e.destroy()),this.destroy$.next(),this.destroy$.complete()}initForm(){this.companyForm=this.fb.group({name:["",ge.required],address:[""]})}checkRole(){let e=this.authService.currentUserRole;this.isAdmin=e==="ADMIN"}openAssignTreesModal(e){this.dialog.open(ke,{width:"400px",data:{companyId:e}}).afterClosed().subscribe(i=>{i&&i.treeId&&this.treeService.assignTreeToCompany(i.treeId,e).subscribe(()=>{this.loadCompanyTrees(e)})})}openUnassignTreesModal(e){this.dialog.open(Ue,{width:"400px",data:{userId:void 0,companyId:this.company.id,treeTypeId:e.treeTypeId}}).afterClosed().subscribe(i=>{i?.updated&&this.loadCompanyTrees(this.company.id)})}loadCompanyTrees(e){this.treeService.getTreesByOwner(void 0,e).subscribe({next:t=>this.companyTrees=t,error:t=>console.error("Error cargando \xE1rboles de la compa\xF1\xEDa:",t)})}loadCompany(e){this.companyService.getCompanyById(e).pipe(T(this.destroy$)).subscribe(t=>{this.company=t,this.companyForm.patchValue({name:t.name,address:t.address}),this.previewImage=t.picture,this.prepareCO2Years(),this.updateAvailableYears()})}onCompanyFileSelected(e){let t=e.target.files[0];if(!t)return;this.selectedFile=t;let i=new FileReader;i.onload=()=>this.previewImage=i.result,i.readAsDataURL(t)}onSubmitCompany(){if(this.companyForm.invalid)return;let e=this.companyForm.value,t=[];if(!this.company.id)t.push(this.companyService.createCompany(e).pipe(B(i=>(console.error("Error creando empresa",i),R(null)))));else if(this.selectedFile&&t.push(this.companyService.updateCompanyPicture(this.company.id,this.selectedFile).pipe(B(i=>(console.error("Error actualizando imagen",i),R(this.company))))),(e.name!==this.company.name||e.address!==this.company.address)&&t.push(this.companyService.updateCompany(this.company.id,e).pipe(B(i=>(console.error("Error actualizando empresa",i),R(this.company))))),!t.length)return;q(t).pipe(T(this.destroy$)).subscribe(i=>{let s=i[i.length-1];s&&(this.company=s,this.companyForm.patchValue({name:s.name,address:s.address}),this.previewImage=s.picture,this.selectedFile=void 0,this.prepareCO2Years(),this.updateAvailableYears(),this.user&&(this.user.role==="ADMIN"?this.router.navigate(["/admin/companies"]):this.user.role==="COMPANY_ADMIN"?this.router.navigate(["/company"]):this.router.navigate(["/home"])))})}cancel(){this.user&&(this.user.role==="ADMIN"?this.router.navigate(["/admin/companies"]):this.user.role==="COMPANY_ADMIN"?this.router.navigate(["/company"]):this.router.navigate(["/home"]))}prepareCO2Years(){if(!this.company?.co2?.length){this.co2Years=[];return}let e=[...this.company.co2].filter(t=>t.year!==void 0).sort((t,i)=>i.year-t.year);this.co2Years=e.map(t=>({id:t.id,year:t.year,totalEmissions:t.totalEmissions||0,totalCompensations:t.totalCompensations||0,net:(t.totalEmissions||0)-(t.totalCompensations||0),emitidoRef:`emitido-${t.year}`,compensadoRef:`compensado-${t.year}`,netoRef:`neto-${t.year}`,editMode:!1,editEmissions:t.totalEmissions||0,editCompensations:t.totalCompensations||0})),setTimeout(()=>this.renderCO2Charts(),0)}toggleEditCO2(e){console.log("toggleEditCO2",e),e.editMode?e._backup&&(e.totalEmissions=e._backup.emissions,e.totalCompensations=e._backup.compensations):e._backup={emissions:e.totalEmissions,compensations:e.totalCompensations},e.editMode=!e.editMode,setTimeout(()=>this.renderCO2Charts(),0)}deleteCO2(e){console.log("deleteCO2",this.company.id,e.id),!(!this.company?.id||!e.id)&&this.companyCo2Service.delete(this.company.id,e.id).subscribe({next:()=>{this.co2Years=this.co2Years.filter(t=>t.id!==e.id),this.updateAvailableYears()},error:t=>{console.error("Error al eliminar CO2",t)}})}saveCO2(e){if(!this.company?.id)return;let t=e.editEmissions??0,i=e.editCompensations??0;e.net=t-i;let s={year:e.year,totalEmissions:t,totalCompensations:i};this.companyCo2Service.save(this.company.id,s).pipe(T(this.destroy$)).subscribe({next:f=>{this.loadCompany(this.company.id)},error:f=>console.error("Error guardando CO\u2082",f)})}addNewYear(e){if(!e||!this.company?.id)return;let t={year:e,totalEmissions:0,totalCompensations:0,net:0,emitidoRef:`emitido-${e}`,compensadoRef:`compensado-${e}`,netoRef:`neto-${e}`,editMode:!0,editEmissions:0,editCompensations:0},i={year:e,totalEmissions:0,totalCompensations:0};this.companyCo2Service.save(this.company.id,i).pipe(T(this.destroy$)).subscribe({next:s=>{t.id=s.id,this.co2Years.push(t),this.co2Years.sort((f,b)=>b.year-f.year),this.selectedYear=void 0,this.updateAvailableYears(),setTimeout(()=>this.renderCO2Charts(),0)},error:s=>console.error("Error guardando nuevo a\xF1o CO\u2082",s)})}createDonutChart(e,t,i,s){let f=e.getContext("2d");if(!f)return;this.chartsMap[e.id]&&this.chartsMap[e.id].destroy();let b={id:"centerText",beforeDraw:Ge=>{let{ctx:h,width:W,height:N}=Ge;h&&(h.save(),h.font=`${N/100*20}px sans-serif`,h.fillStyle="#333",h.textBaseline="middle",h.fillText(`${t}`,W/2-h.measureText(`${t}`).width/2,N/2-10),h.font=`${N/100*8}px sans-serif`,h.fillStyle="#666",h.fillText("Toneladas de CO\u2082",W/2-h.measureText("Toneladas de CO\u2082").width/2,N/2+15),h.restore())}},F=s>0?s:1,O=t/F*100,U={datasets:[{data:[O,100-O],backgroundColor:[i,"#e0e0e0"],cutout:"75%",borderWidth:0}]},We={responsive:!0,animation:{animateRotate:!0,animateScale:!0,duration:1e3},plugins:{legend:{display:!1},tooltip:{enabled:!1}}};this.chartsMap[e.id]=new $(f,{type:"doughnut",data:U,options:We,plugins:[b]})}renderCO2Charts(){Object.values(this.chartsMap).forEach(t=>t.destroy()),this.chartsMap={};let e=["emitidoRef","compensadoRef","netoRef"];this.co2Years.forEach((t,i)=>{let s=i===0?200:80;e.forEach(f=>{let b=document.getElementById(t[f]);if(!b)return;b.width=s,b.height=s;let F=f==="emitidoRef"?t.totalEmissions:f==="compensadoRef"?t.totalCompensations:t.net,O=f==="emitidoRef"?"#fc4d03ff":f==="compensadoRef"?"#89de8cff":"#2c80c5cf";this.createDonutChart(b,F,O,t.totalEmissions||1)})})}updateAvailableYears(){let e=new Date().getFullYear(),t=this.co2Years.map(i=>i.year);this.availableYears=[];for(let i=2020;i<=e;i++)t.includes(i)||this.availableYears.push(i);this.availableYears.sort((i,s)=>s-i)}getNetColorClass(e,t){let i=e-t,s=e>0?i/e:1;return s<.5?"net-yellow":s<=1?"net-red":"net-green"}getCompensatedPercentage(e,t){return e?(t/e*100).toFixed(0):"0"}static{this.\u0275fac=function(t){return new(t||r)(M(Ie),M(Be),M(je),M(oe),M(re),M(de),M(ue),M(Re),M(pe))}}static{this.\u0275cmp=J({type:r,selectors:[["app-company-form"]],standalone:!0,features:[Q],decls:1,vars:1,consts:[["noCompanyTrees",""],["editModeButtons",""],["class","w-full max-w-full mx-auto bg-white p-6 rounded-2xl shadow-lg",4,"ngIf"],[1,"w-full","max-w-full","mx-auto","bg-white","p-6","rounded-2xl","shadow-lg"],[3,"ngSubmit","formGroup"],[1,"text-2xl","font-bold","mb-6","text-center"],[1,"md:col-span-2","flex","flex-col","items-center","mb-6"],[1,"w-24","h-24","rounded-full","shadow-lg","mb-2","object-cover",3,"src","alt"],[1,"cursor-pointer","bg-gray-200","hover:bg-gray-300","p-2","rounded-full","flex","items-center","gap-2"],[1,"material-icons"],["type","file","accept","image/*","hidden","",3,"change"],[1,"flex","flex-col","md:flex-row","gap-4","mb-6"],[1,"flex-1"],["for","name",1,"block","text-gray-700","font-medium","mb-1"],["id","name","type","text","formControlName","name","required","",1,"w-full","rounded-xl","border","border-gray-300","px-4","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-transparent","transition",3,"placeholder"],["for","address",1,"block","text-gray-700","font-medium","mb-1"],["id","address","type","text","formControlName","address",1,"w-full","rounded-xl","border","border-gray-300","px-4","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-transparent","transition",3,"placeholder"],[1,"flex","justify-end","gap-4","mt-6"],["type","button",1,"flex-1","bg-gray-300","text-gray-700","py-3","rounded-xl","hover:bg-gray-400","transition",3,"click"],["type","submit",1,"flex-1","bg-green-600","text-white","py-3","rounded-xl","hover:bg-green-700","disabled:opacity-50","transition"],[1,"mt-4","w-full","text-left"],[1,"flex","justify-between","items-center","mb-2"],[1,"font-semibold","text-gray-700"],["type","button","class","bg-green-200 text-green-800 px-3 py-1 rounded-full hover:bg-green-300 transition text-sm",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"my-6"],[4,"ngIf"],["type","button",1,"bg-green-200","text-green-800","px-3","py-1","rounded-full","hover:bg-green-300","transition","text-sm",3,"click"],["class","flex justify-between border-b py-1",4,"ngFor","ngForOf"],[1,"flex","justify-between","border-b","py-1"],[1,"block","font-semibold"],[1,"text-sm","text-gray-500"],["type","button","class","bg-red-200 text-red-800 px-3 py-1 rounded-full hover:bg-red-300 transition text-sm",3,"click",4,"ngIf"],["type","button",1,"bg-red-200","text-red-800","px-3","py-1","rounded-full","hover:bg-red-300","transition","text-sm",3,"click"],[1,"text-gray-500","italic"],[1,"border","p-4","rounded-xl","shadow-sm","text-center","mt-6","bg-gray-50"],["for","newYear",1,"block","text-gray-700","font-medium","mb-2"],["id","newYear","name","newYear",1,"w-32","rounded-xl","border","border-gray-300","px-3","py-2","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-transparent","transition","mb-2",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"w-32","bg-green-600","text-white","py-2","rounded-xl","hover:bg-green-700","transition","mt-2",3,"click"],[1,"mb-8","border","p-4","rounded-xl","shadow-sm","bg-gray-50"],["class","flex flex-wrap gap-4 mb-4 justify-center",4,"ngIf"],[1,"flex","flex-wrap","gap-4","justify-center","items-center"],[1,"text-center"],[1,"font-medium"],[1,"donut-large",3,"id"],[1,"text-4xl","font-bold",3,"ngClass"],[1,"text-gray-600","text-sm"],[1,"text-xs","text-gray-500","mt-1"],[1,"mt-5","flex","justify-end","mb-2"],[1,"flex","justify-center","mt-4","gap-4","w-full"],["class","mb-6 border p-4 rounded-xl shadow-sm bg-gray-50",4,"ngFor","ngForOf"],[1,"flex","flex-wrap","gap-4","mb-4","justify-center"],[1,"block","text-gray-700","font-medium","mb-1"],["type","number",1,"w-32","rounded-xl","border","border-gray-300","px-3","py-1","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-green-500","focus:border-transparent","transition",3,"ngModelChange","ngModel"],[1,"px-4","py-2","rounded-xl","bg-blue-600","text-white","hover:bg-blue-700","transition",3,"click"],[1,"bg-green-600","text-white","py-3","px-6","rounded-xl","hover:bg-green-700","transition","w-1/2",3,"click"],[1,"bg-gray-300","text-gray-700","py-3","px-6","rounded-xl","hover:bg-gray-400","transition","flex-1",3,"click"],[1,"bg-red-600","text-white","py-3","px-6","rounded-xl","hover:bg-red-700","transition","flex-1",3,"click"],[1,"mb-6","border","p-4","rounded-xl","shadow-sm","bg-gray-50"],[1,"w-16","font-bold"],[1,"donut-small",3,"id"],[1,"font-semibold","text-lg",3,"ngClass"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-500"],[3,"value"]],template:function(t,i){t&1&&v(0,dt,49,42,"div",2),t&2&&m("ngIf",i.company)},dependencies:[ne,X,Z,ee,te,ie,we,ye,Se,Oe,Ce,he,Me,xe,fe,Te,ve,Ae,Ee,be,me,_e,Fe,Ye,Ne,ce,se,ae],encapsulation:2})}}return r})();export{Rt as CompanyFormComponent};
